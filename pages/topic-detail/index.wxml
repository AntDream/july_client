<!--pages/topic-detail/index.wxml-->

<!-- 动态详情 -->
<l-card type="avatar" l-class="card" l-title-class="card-title" image="{{topic.user.avatar}}" title="{{topic.user.nick_name}}" describe="{{topic.create_time}}">
  <view class="avater-content">{{topic.content}}</view>
  <view class="posters">
    <block wx:if="{{topic.images.length == 1}}">
      <image class="column-one" src="{{topic.images[0]}}" mode="widthFix" bindtap="previewImage" data-src="{{topic.images[0]}}" lazy-load />
    </block>
    <block wx:elif="{{topic.images.length == 2 || topic.images.length == 4}}">
      <image class="column-two" wx:for="{{topic.images}}" wx:key="item" src="{{item}}" mode="aspectFill" bindtap="previewImage" data-src="{{item}}" lazy-load />
    </block>
    <block wx:else>
      <image wx:for="{{topic.images}}" wx:key="item" src="{{item}}" mode="aspectFill" bindtap="previewImage" data-src="{{item}}" lazy-load />
    </block>
  </view>

  <view class="label-box" wx:if="{{topic.label}}">
    <l-tag wx:for="{{topic.label}}" wx:key="item" l-class="tag" shape="circle" bg-color="#337559" font-color="#337559" plain>#{{item.name}}</l-tag>
  </view>

  <view class="avater-share-container">
    <view class="like-container">
      <l-icon name="comment" color="{{topic.has_comment ? '#d81e05' : '#666'}}" size="28" />
      <view class="{{topic.has_comment ? 'has-text' : ''}} number">{{topic.comment_count}}</view>
    </view>
    <view class="like-container">
      <l-icon name="like" color="{{topic.has_star ? '#d81e05' : '#666'}}" size="28" />
      <view class="{{topic.has_star ? 'has-text' : ''}} number">{{topic.star_count}}</view>
    </view>
    <view class="like-container">
      <l-icon name="eye" color="#666" size="28" />
      <view class="number">{{topic.click_count}}</view>
    </view>
  </view>
  <l-icon l-class="ellipsis" slot="more" name="ellipsis" color="#777" size="32" bindtap="clickMore" />
</l-card>

<!-- 操作菜单 -->
<l-action-sheet show-cancel open-api="{{false}}" item-list="{{actionList}}" show="{{showAction}}" bind:linitemtap="linItemtap" bind:lincancel="lincancel" />