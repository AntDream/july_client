<!--pages/chat-room/index.wxml-->

<!-- 消息内容 -->
<block wx:for="{{msg}}" wx:key="item">
  <view wx:if="{{item.type == 'status'}}" class="chat-item">
    <view class="tip">{{item.nick_name + item.data}}</view>
  </view>
  <view wx:if="{{item.type == 'message'}}" class="chat-item {{item.user_id == userId ? 'reverse' : ''}}">
    <image class="avatar" src="{{item.avatar}}" />
    <view class="message-box">
      <view class="nick-name {{item.user_id == userId ? 'text-right' : ''}}">{{item.nick_name}}</view>
      <view class="{{item.user_id == userId ? 'content-right triangle-right' : 'content-left triangle-left'}}">{{item.data}}</view>
    </view>
  </view>
</block>

<!-- 内容编辑区 -->
<view class="chat-edit">
  <l-input hide-label maxlength="150" width="600" placeholder="聊点什么吧~" value="{{content}}" bind:lininput="setMessage" />
  <l-button shape="circle" size="mini" bg-color="#337559" width="125" height="60" bind:lintap="onSendMessageTap">发送</l-button>
</view>

<!-- 消息提示 -->
<l-message />